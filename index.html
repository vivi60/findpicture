<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aì˜ ê°ì˜¥
    </title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Press+Start+2P&display=swap');

        body {
            background-color: #0a0a0a;
            color: #eee;
            font-family: 'Black Han Sans', sans-serif;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            min-height: 100vh; margin: 0; overflow-x: hidden; user-select: none;
        }

        /* í—¤ë” ë° ê²Œì´ì§€ */
        h1 { text-shadow: 0 0 10px #ff0000; color: #ff4444; margin: 10px 0; }
        .main-container { display: flex; gap: 20px; align-items: flex-start; flex-wrap: wrap; justify-content: center; }

        /* ê²Œì„ ì˜ì—­: ì¢Œìš° ì´ë¯¸ì§€ */
        #game-area {
            position: relative; background: #111; padding: 15px;
            border: 3px solid #444; border-radius: 10px; display: flex; flex-direction: column; align-items: center;
        }
        .image-wrapper {
            position: relative; display: flex; gap: 10px; cursor: crosshair;
        }
        canvas {
            background: #222; border: 2px solid #333; max-width: 500px; height: auto;
        }

        /* ì‹œê°„ ê²Œì´ì§€ (ìƒë‹¨ ê°€ë¡œí˜•) */
        #time-bar-container {
            width: 100%; height: 20px; background: #222; border: 1px solid #555; margin-bottom: 10px; position: relative;
        }
        #time-fill {
            width: 100%; height: 100%; background: linear-gradient(to right, #ff4444, #ffcc00); transition: width 0.1s linear;
        }

        /* ìš°ì¸¡ ì •ë³´ íŒ¨ë„ */
        .info-panel {
            width: 260px; background: #1a1a1a; padding: 20px; border-radius: 8px; border: 1px solid #333;
            display: flex; flex-direction: column; gap: 15px;
        }
        .score-display { font-family: 'Press Start 2P'; color: #00ff00; font-size: 1.5rem; text-align: center; }
        .total-val { color: #ffcc00; font-family: 'Press Start 2P'; font-size: 0.8rem; text-align: center; }
        
        /* ê¸°ì—¬ë„ ë°” */
        .goal-bar-bg { width: 100%; height: 15px; background: #333; border-radius: 10px; overflow: hidden; margin-top: 5px; border: 1px solid #555; }
        #global-progress { width: 0%; height: 100%; background: #ffcc00; transition: width 1s; }

        /* ë²„íŠ¼ ë° ì…ë ¥ì°½ */
        input[type="text"] { width: 100%; padding: 8px; background: #222; border: 1px solid #444; color: white; text-align: center; box-sizing: border-box; }
        .btn {
            width: 100%; padding: 15px; color: white; border: none; border-radius: 4px; cursor: pointer;
            font-family: inherit; font-size: 1.1rem; background: #8b0000; box-shadow: 0 4px 0 #500;
        }
        .btn:active { transform: translateY(2px); box-shadow: 0 2px 0 #500; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* ê²°ê³¼ ì°½ */
        #overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); display: none; flex-direction: column;
            align-items: center; justify-content: center; z-index: 100;
        }
        
        .rank-list { list-style: none; padding: 0; font-size: 0.8rem; }
        .rank-list li { display: flex; justify-content: space-between; border-bottom: 1px solid #333; padding: 5px 0; }

        /* í”¼ë“œë°± íš¨ê³¼ */
        .hit-effect { position: absolute; border: 3px solid #00ff00; border-radius: 50%; pointer-events: none; transform: translate(-50%, -50%); animation: flash 0.5s; }
        @keyframes flash { from { opacity: 1; transform: translate(-50%, -50%) scale(0.5); } to { opacity: 0; transform: translate(-50%, -50%) scale(1.5); } }
    
    /* í´ë¦­ í”¼ë“œë°± ìŠ¤íƒ€ì¼ */
.feedback-mark {
    position: absolute;
    width: 40px;
    height: 40px;
    pointer-events: none; /* í´ë¦­ ë°©í•´ ê¸ˆì§€ */
    transform: translate(-50%, -50%); /* ì¤‘ì‹¬ì  ë§ì¶”ê¸° */
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 24px;
    z-index: 10;
    animation: popIn 0.3s ease-out;
}

@keyframes popIn {
    0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
    80% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
    100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
}
    
    /* ë² ì´ìŠ¤ìº í”„ì™€ ë™ì¼í•œ ì†Œí˜• ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
.btn-small { 
    padding: 5px 10px; 
    font-size: 0.8rem; 
    background: #8b0000; 
    width: 40%; /* ì…ë ¥ì°½ ë„ˆë¹„ì™€ ë§ì¶¤ */
}
    </style>
</head>
<body>

  
    <div class="main-container">
        <div id="game-area">
            <div id="time-bar-container">
                <div id="time-fill"></div>
            </div>
            <div class="image-wrapper" id="click-area">
                <canvas id="canvas-orig"></canvas>
                <canvas id="canvas-diff"></canvas>
                </div>
            <p style="font-size: 0.8rem; color: #888;">ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ì˜ ë‹¤ë¥¸ ë¶€ë¶„ì„ ì°¾ìœ¼ì„¸ìš”! (ì˜¤ë‹µ ì‹œ ê°ì )</p>
            
            <div id="overlay">
                <h2 id="result-text" style="font-size: 2rem;">TIME OVER</h2>
                <button class="btn" onclick="startSequence()" style="width: 200px;">ë‹¤ì‹œ ë„ì „</button>
            </div>
        </div>

        <div class="info-panel">
            <div class="info-box">
                <div style="font-size: 0.8rem; color:#aaa;">ë‚˜ì˜ í˜„ì¬ ì ìˆ˜</div>
                <div id="current-score" class="score-display">0</div>
            </div>

            <div class="info-box">
                <div style="font-size: 0.8rem; color:#aaa;">ğŸŒ ì „ì²´ íƒˆì¶œ ê²Œì´ì§€</div>
                <div class="total-val" id="global-score-text">0 / 25,000</div>
                <div class="goal-bar-bg">
                    <div id="global-progress"></div>
                </div>
            </div>

            <div class="info-box">
    <div style="display: flex; flex-direction: column; gap: 5px; align-items: center;">
        <input type="text" id="username-input" placeholder="ëŸ¬ë„ˆ ì´ë¦„ ì…ë ¥" maxlength="8">
        <button class="btn btn-small" id="btn-save-name" onclick="updateName()">ì´ë¦„ ì €ì¥</button>
    </div>
</div>
            <div class="info-box">
                <div style="font-size: 0.8rem; color:#aaa; margin-bottom:10px;">ğŸ† ì‹¤ì‹œê°„ ë­í‚¹ (Top 5)</div>
                <ul id="leaderboard" class="rank-list"><li>ë¡œë”© ì¤‘...</li></ul>
            </div>
            
            <button id="btn-start" class="btn" onclick="startSequence()">ì‹œì‘</button>
            <button id="btn-quit" class="btn" onclick="quitGame()" style="display: none;">ì¤‘ë‹¨í•˜ê¸°</button>
        </div>
        
    </div>

    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore, doc, getDoc, setDoc, collection, query, orderBy, limit, getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

    // 1. Firebase ì„¤ì •
    const firebaseConfig = {
        apiKey: "AIzaSyA2zLCI08iXD5eV-pC7Zav9SodGwNyHsxE",
        authDomain: "basecamp-1254b.firebaseapp.com",
        projectId: "basecamp-1254b",
        databaseURL: "https://basecamp-1254b-default-rtdb.firebaseio.com",
        storageBucket: "basecamp-1254b.firebasestorage.app",
        messagingSenderId: "587183782376",
        appId: "1:587183782376:web:16cbbbface1cf8f0d18c5d"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // 2. ê²Œì„ ì„¤ì •
    const GAME_TIME = 30;
    const TARGET_TOTAL_SCORE = 25000;
    const HIT_SCORE = 100;
    const MISS_PENALTY = 30;
    
   // ì—¬ê¸°ì— ë„£ìœ¼ì„¸ìš”!
const stages = [
    {
        orig: 'https://i.ibb.co/7JgQrP3F/1.png', // ì²« ë²ˆì§¸ ìŠ¤í…Œì´ì§€ ì›ë³¸
        diff: 'https://i.ibb.co/Ldg7FZ3X/1.png', // ì²« ë²ˆì§¸ ìŠ¤í…Œì´ì§€ í‹€ë¦°ê·¸ë¦¼
        answers: [
            {x: 545, y: 167, r: 25},
            {x: 392, y: 202, r: 25},
            {x: 236, y: 239, r: 25},
            {x: 264, y: 127, r: 25},
            {x: 117, y: 49, r: 25}
        ]
    },
    {
        orig: 'https://i.ibb.co/PG8WZM7t/2.png',
        diff: 'https://i.ibb.co/VWdK4F1F/2.png',
        answers: [
            {x: 118, y: 160, r: 25},
            {x: 33, y: 297, r: 25},
            {x: 255, y: 88, r: 25},
            {x: 394, y: 156, r: 25},
            {x: 325, y: 242, r: 25},
            {x: 561, y: 130, r: 25},
            {x: 264, y: 293, r: 35}
        ]
    }
];

    let currentStageIndex = 0; // í˜„ì¬ ìŠ¤í…Œì´ì§€ ë²ˆí˜¸

    let userId = localStorage.getItem('escape_user_id') || 'runner_' + Date.now();
    localStorage.setItem('escape_user_id', userId);
    let userName = localStorage.getItem('escape_user_name') || "ëŸ¬ë„ˆ_" + Math.floor(Math.random()*1000);
    document.getElementById('username-input').value = userName;

    let currentScore = 0;
    let timeLeft = GAME_TIME;
    let isPlaying = false;
    let timerId;
    let foundIndices = new Set();

    const canvOrig = document.getElementById('canvas-orig');
    const canvDiff = document.getElementById('canvas-diff');
    
    
    // ìŠ¤í…Œì´ì§€ ë¡œë“œ í•¨ìˆ˜
function loadStage(index) {
    if (index >= stages.length) {
        alert("ëª¨ë“  êµ¬ì—­ì˜ ì˜¤ë¥˜ë¥¼ ë°œê²¬í–ˆìŠµë‹ˆë‹¤.");
        stopGame();
        return;
    }

    document.querySelectorAll('.feedback-mark').forEach(m => m.remove());
    foundIndices.clear();

    const stage = stages[index];
    const imgO = new Image();
    const imgD = new Image();
    imgO.crossOrigin = "Anonymous";
    imgD.crossOrigin = "Anonymous";

    let loadedCount = 0;
    const onImgLoad = () => {
        loadedCount++;
        if(loadedCount === 2) {
            canvOrig.width = canvDiff.width = imgD.width;
            canvOrig.height = canvDiff.height = imgD.height;
            canvOrig.getContext('2d').drawImage(imgO, 0, 0);
            canvDiff.getContext('2d').drawImage(imgD, 0, 0);
        }
    };

    imgO.onload = onImgLoad;
    imgD.onload = onImgLoad;

    // src ì„¤ì •ì€ ë°˜ë“œì‹œ onload ì´ë²¤íŠ¸ ë“±ë¡ í›„ì— í•´ì•¼ í•©ë‹ˆë‹¤!
    imgO.src = stage.orig;
    imgD.src = stage.diff;
}

    // 3. ê²Œì„ ë¡œì§
window.startSequence = () => {
    // 1. ì´ë¦„ í™•ì¸
    const inputName = document.getElementById('username-input').value.trim();
    if(!inputName) return alert("ì´ë¦„ì„ ì…ë ¥í•˜ê³  ì €ì¥ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”!");
    
    // 2. ì´ˆê¸°í™” ë° ìƒíƒœ ì„¤ì •
    if(isPlaying) return;
    
    userName = inputName;
    localStorage.setItem('escape_user_name', userName);
    document.querySelectorAll('.feedback-mark').forEach(m => m.remove());

    isPlaying = true;
    currentScore = 0;
    timeLeft = GAME_TIME;
    currentStageIndex = 0; // ìŠ¤í…Œì´ì§€ ì´ˆê¸°í™”
    foundIndices.clear();

    // 3. UI ì—…ë°ì´íŠ¸
    document.getElementById('current-score').innerText = "0";
    document.getElementById('overlay').style.display = 'none';
    document.getElementById('btn-start').disabled = true;
    document.getElementById('btn-quit').style.display = 'block';

    // 4. ì²« ìŠ¤í…Œì´ì§€ ë¡œë“œ
    loadStage(currentStageIndex);

    // 5. íƒ€ì´ë¨¸ ì‹œì‘
    timerId = setInterval(() => {
        timeLeft -= 0.1;
        document.getElementById('time-fill').style.width = (timeLeft / GAME_TIME) * 100 + "%";
        if(timeLeft <= 0) stopGame();
    }, 100);
};

    function stopGame() {
        isPlaying = false;
        clearInterval(timerId);
        document.getElementById('overlay').style.display = 'flex';
        document.getElementById('btn-start').disabled = false;
        document.getElementById('btn-quit').style.display = 'none';
        saveScore(currentScore);
    }

    // 3. ê²Œì„ ë¡œì§ - í´ë¦­ ê°ì§€ ì„¹ì…˜ (ì´ ë¶€ë¶„ì„ í†µì§¸ë¡œ êµì²´í•˜ì„¸ìš”)
canvDiff.addEventListener('mousedown', (e) => {
    if(!isPlaying) return;
    
    // 1. í´ë¦­í•œ ìœ„ì¹˜ì˜ ì¢Œí‘œ ê³„ì‚° (ìº”ë²„ìŠ¤ í¬ê¸°ì— ë§ê²Œ ë³´ì •)
    const rect = canvDiff.getBoundingClientRect();
    const scaleX = canvDiff.width / rect.width;
    const scaleY = canvDiff.height / rect.height;
    
    // ë¡œì§ìš© ì¢Œí‘œ (ì´ë¯¸ì§€ í•´ìƒë„ ê¸°ì¤€)
    const logicX = (e.clientX - rect.left) * scaleX;
    const logicY = (e.clientY - rect.top) * scaleY;

    // í™”ë©´ í‘œì‹œìš© ì¢Œí‘œ (í”¼ë“œë°± ë§ˆí¬ë¥¼ ì°ì„ ìœ„ì¹˜)
    const wrapperRect = document.getElementById('click-area').getBoundingClientRect();
    const displayX = e.clientX - wrapperRect.left;
    const displayY = e.clientY - wrapperRect.top;

    // 2. í˜„ì¬ ìŠ¤í…Œì´ì§€ì˜ ì •ë‹µ ë°°ì—´ ê°€ì ¸ì˜¤ê¸°
    const currentAnswers = stages[currentStageIndex].answers; 
    let hitIndex = -1;

    // 3. ì •ë‹µ íŒì • (í´ë¦­í•œ ê³³ ê·¼ì²˜ì— ì •ë‹µì´ ìˆëŠ”ì§€ í™•ì¸)
    currentAnswers.forEach((ans, index) => {
        const dist = Math.sqrt((logicX - ans.x)**2 + (logicY - ans.y)**2);
        if(dist < ans.r && !foundIndices.has(index)) {
            hitIndex = index;
        }
    });

    // 4. íŒì • ê²°ê³¼ì— ë”°ë¥¸ ë™ì‘
    if(hitIndex !== -1) {
        foundIndices.add(hitIndex); // ì°¾ì€ ëª©ë¡ì— ì¶”ê°€
        currentScore += HIT_SCORE; // ì ìˆ˜ ì¶”ê°€
        showFeedback(displayX, displayY, true); // ì´ˆë¡ìƒ‰ 'O' í‘œì‹œ
        
        // [í•µì‹¬] í˜„ì¬ ìŠ¤í…Œì´ì§€ì˜ ëª¨ë“  ì •ë‹µì„ ë‹¤ ì°¾ì•˜ëŠ”ì§€ í™•ì¸
        if(foundIndices.size === currentAnswers.length) {
            setTimeout(() => {
                alert(`Stage ${currentStageIndex + 1} í´ë¦¬ì–´! ë‹¤ìŒ êµ¬ì—­ìœ¼ë¡œ...`);
                currentStageIndex++; // ë‹¤ìŒ ìŠ¤í…Œì´ì§€ ë²ˆí˜¸ë¡œ ë³€ê²½
                loadStage(currentStageIndex); // ë‹¤ìŒ ì´ë¯¸ì§€ ë¡œë“œ í•¨ìˆ˜ í˜¸ì¶œ
            }, 500);
        }
    } else {
        // í‹€ë ¸ì„ ë•Œ
        currentScore = Math.max(0, currentScore - MISS_PENALTY); // ì ìˆ˜ ê°ì 
        showFeedback(displayX, displayY, false); // ë¹¨ê°„ìƒ‰ 'X' í‘œì‹œ
    }


    // 5. í™”ë©´ì˜ í˜„ì¬ ì ìˆ˜ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
    document.getElementById('current-score').innerText = currentScore;
});

    function showFeedback(x, y, isHit) {
        const mark = document.createElement('div');
        mark.className = 'feedback-mark';
        mark.style.left = x + 'px';
        mark.style.top = y + 'px';

        if (isHit) {
            mark.style.color = '#00ff00';
            mark.style.border = '3px solid #00ff00';
            mark.style.borderRadius = '50%';
            mark.innerHTML = 'O'; 
        } else {
            mark.style.color = '#ff0000';
            mark.innerHTML = 'X';
            setTimeout(() => {
                mark.style.transition = 'opacity 0.5s';
                mark.style.opacity = '0';
                setTimeout(() => mark.remove(), 500);
            }, 1000);
        }
        document.getElementById('click-area').appendChild(mark);
    }

    // 4. Firebase ë°ì´í„° ì—°ë™ í•¨ìˆ˜ë“¤
    async function saveScore(score) {
        try {
            const docRef = doc(db, "escape_scores", userId);
            const snap = await getDoc(docRef);
            let high = 0;
            if(snap.exists()) high = snap.data().score || 0;
            if(score > high) {
                await setDoc(docRef, { name: userName, score: score, date: new Date().toISOString() });
            }
            loadLeaderboard();
            updateGlobalTotal();
        } catch(e) { console.error(e); }
    }

    async function loadLeaderboard() {
        const q = query(collection(db, "escape_scores"), orderBy("score", "desc"), limit(5));
        const snap = await getDocs(q);
        const list = document.getElementById('leaderboard');
        list.innerHTML = "";
        snap.forEach(d => {
            const data = d.data();
            list.innerHTML += `<li><span>${data.name}</span><strong>${data.score}</strong></li>`;
        });
    }

    async function updateGlobalTotal() {
        const snap = await getDocs(collection(db, "escape_scores"));
        let total = 0;
        snap.forEach(d => total += (d.data().score || 0));
        document.getElementById('global-score-text').innerText = `${total.toLocaleString()} / ${TARGET_TOTAL_SCORE.toLocaleString()}`;
        let pct = (total / TARGET_TOTAL_SCORE) * 100;
        document.getElementById('global-progress').style.width = Math.min(pct, 100) + "%";
        if(total >= TARGET_TOTAL_SCORE) {
            document.querySelector('h1').innerText = "íƒˆì¶œí•˜ëŠ”ì¤‘...";
            document.querySelector('h1').style.color = "#00ff00";
        }
    }

    loadLeaderboard();
    updateGlobalTotal();
// [ì¶”ê°€] í˜ì´ì§€ ë¡œë“œ ì‹œ ì²« ë²ˆì§¸ ìŠ¤í…Œì´ì§€ ì´ë¯¸ì§€ë¥¼ ë¯¸ë¦¬ ë³´ì—¬ì¤ë‹ˆë‹¤.
    


    // [ì¶”ê°€] ì´ë¦„ ì €ì¥ í•¨ìˆ˜
window.updateName = async () => {
    const newName = document.getElementById('username-input').value.trim();
    if(!newName) return alert("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”!");
    
    userName = newName;
    localStorage.setItem('escape_user_name', userName); // ë°©íƒˆì¶œìš© ë¡œì»¬ìŠ¤í† ë¦¬ì§€ í‚¤
    
    // DBì— ì¦‰ì‹œ ë°˜ì˜í•˜ê³  ì‹¶ë‹¤ë©´ (ì„ íƒì‚¬í•­)
    try {
        const docRef = doc(db, "escape_scores", userId);
        await setDoc(docRef, { name: userName }, { merge: true });
        alert("ëŸ¬ë„ˆ ì´ë¦„ ì €ì¥ ì™„ë£Œ!");
    } catch(e) {
        console.error("ì´ë¦„ ì €ì¥ ì˜¤ë¥˜:", e);
        alert("ì´ë¦„ ì €ì¥ ì„±ê³µ (ë¡œì»¬)");
    }
}
// [ì¶”ê°€] ê²Œì„ ì¤‘ë‹¨ í•¨ìˆ˜
window.quitGame = () => {
    if (!confirm("ì •ë§ í¬ê¸°í•˜ì‹œê² ìŠµë‹ˆê¹Œ? í˜„ì¬ ì ìˆ˜ëŠ” ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.")) return;

    isPlaying = false;
    clearInterval(timerId); // íƒ€ì´ë¨¸ ì¤‘ì§€
    
    // UI ì´ˆê¸°í™”
    document.getElementById('overlay').style.display = 'none';
    document.getElementById('btn-start').disabled = false;
    document.getElementById('btn-quit').style.display = 'none'; // ì¤‘ë‹¨ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
    document.getElementById('time-fill').style.width = "100%";
    document.getElementById('current-score').innerText = "0";
    
    // í´ë¦­ í‘œì‹œ ì œê±°
    document.querySelectorAll('.feedback-mark').forEach(m => m.remove());
    
    alert("íƒˆì¶œì„ í¬ê¸°í–ˆìŠµë‹ˆë‹¤.");
};



 // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš© // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš© // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš© // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš©
 // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš© // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš© // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš©
 // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš© // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš© // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš©
         // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš© // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš© // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš©
        // [ì„ì‹œ ì½”ë“œ] ì¢Œí‘œ í™•ì¸ìš©
    //canvDiff.addEventListener('mousedown', (e) => {
    //const rect = canvDiff.getBoundingClientRect();
    //const scaleX = canvDiff.width / rect.width;
    //const scaleY = canvDiff.height / rect.height;
    //const x = Math.round((e.clientX - rect.left) * scaleX);
    //const y = Math.round((e.clientY - rect.top) * scaleY);
    
    //console.log(`í˜„ì¬ í´ë¦­ ì¢Œí‘œ: {x: ${x}, y: ${y}, r: 25}`);
    //alert(`ì¢Œí‘œ: x=${x}, y=${y}`); // í™”ë©´ì— ë°”ë¡œ ë„ìš°ê³  ì‹¶ì„ ë•Œ
//});

    </script>
</body>
</html>